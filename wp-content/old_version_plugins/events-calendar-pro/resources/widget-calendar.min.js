jQuery(document).ready(function(b){function g(){var a=b(".tribe-mini-calendar-wrapper");if(b(".tribe-mini-calendar-wrapper.layout-wide").length&&b(".tribe-mini-calendar-right").length){var c=b(".tribe-mini-calendar-right"),d=a.height(),c=c.outerHeight(),c=c+20;c>d?a.css("height",c+"px"):a.css("height","auto")}else b(".tribe-mini-calendar-wrapper.layout-wide").length&&a.css("height","auto")}function h(a){b(".tribe-mini-calendar .tribe-events-thismonth").removeClass("tribe-mini-calendar-today");a.parents(".tribe-events-has-events").addClass("tribe-mini-calendar-today")}
g();b(".tribe-mini-calendar-wrapper").delegate(".tribe-mini-calendar-nav-link","click",function(a){a.preventDefault();a=b(this);var c=a.closest(".tribe-mini-calendar"),d=a.closest(".tribe-mini-calendar-wrapper");a={action:"tribe-mini-cal",eventDate:a.attr("data-month"),count:c.data("count"),tax_query:c.data("tax-query"),nonce:c.data("nonce")};c.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show();b.post(TribeMiniCalendar.ajaxurl,a,function(a){c.find(".tribe-mini-calendar-list-wrapper").remove();
if(a.success){var f="",f=b.isFunction(b.fn.parseHTML)?b.parseHTML(a.html):a.html;c.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide();d.empty().html(f);g()}})});b(".tribe-mini-calendar-wrapper").delegate(".tribe-mini-calendar-day-link","click",function(a){a.preventDefault();var c=b(this);a=c.attr("data-day");var d=c.text(),e=c.closest(".tribe-mini-calendar"),f=e.parent().siblings(".tribe-mini-calendar-list-wrapper");b("h2.tribe-mini-calendar-title").text(b("#tribe-mini-calendar-month-name").val()+
" "+d+" Events");h(c);a={action:"tribe-mini-cal-day",eventDate:a,count:e.data("count"),tax_query:e.data("tax-query"),nonce:e.data("nonce")};e.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show();b.post(TribeMiniCalendar.ajaxurl,a,function(a){if(a.success){var d="",d=b.isFunction(b.fn.parseHTML)?b.parseHTML(a.html):a.html;e.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide();f.replaceWith(d);h(c);g()}})})});
